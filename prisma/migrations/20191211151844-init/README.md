# Migration `20191211151844-init`

This migration has been generated by tbainbridge at 12/11/2019, 3:18:44 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Guild" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Channel" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Command" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "response" text NOT NULL DEFAULT '' ,
  "trigger" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."User" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

ALTER TABLE "public"."Channel" ADD COLUMN "guild" text NOT NULL  REFERENCES "public"."Guild"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Command" ADD COLUMN "guild" text NOT NULL  REFERENCES "public"."Guild"("id") ON DELETE RESTRICT,
ADD COLUMN "user" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."User" ADD COLUMN "guild" text NOT NULL  REFERENCES "public"."Guild"("id") ON DELETE RESTRICT;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20191211151844-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,53 @@
+datasource db {
+    provider = "postgres"
+    url      = "postgres://ulhascvnhtawsd:de1c0e091478eee0a76e41f223d1435a4e3d5ae3a5f1dc36a15724eeb02d1c38@ec2-174-129-255-37.compute-1.amazonaws.com:5432/d5agn6r6p90rek?sslaccept=accept_invalid_certs"
+    default  = true
+}
+
+generator photon {
+    provider = "photonjs"
+}
+
+model Guild {
+    id String @id
+
+    name String
+
+    user User[]
+    commands Command[]
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
+
+model Channel {
+    id String @id
+
+    guild Guild
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
+
+model Command {
+    id String @id
+
+    trigger String
+    response String
+
+    user User
+    guild Guild
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
+
+model User {
+    id String @id
+
+    guild Guild
+    commands Command[]
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
```


