# Migration `20191213103423-init`

This migration has been generated by tbainbridge at 12/13/2019, 10:34:23 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Guild" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "name" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Reminder" (
  "channelId" text NOT NULL DEFAULT '' ,
  "content" text NOT NULL DEFAULT '' ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "isDone" boolean NOT NULL DEFAULT false ,
  "messageId" text NOT NULL DEFAULT '' ,
  "remindAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Channel" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Command" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "response" text NOT NULL DEFAULT '' ,
  "trigger" text NOT NULL DEFAULT '' ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."User" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "timezone" text   ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "username" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

ALTER TABLE "public"."Reminder" ADD COLUMN "guild" text NOT NULL  REFERENCES "public"."Guild"("id") ON DELETE RESTRICT,
ADD COLUMN "user" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Channel" ADD COLUMN "guild" text NOT NULL  REFERENCES "public"."Guild"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Command" ADD COLUMN "guild" text NOT NULL  REFERENCES "public"."Guild"("id") ON DELETE RESTRICT,
ADD COLUMN "user" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."User" ADD COLUMN "guild" text NOT NULL  REFERENCES "public"."Guild"("id") ON DELETE RESTRICT;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20191213103423-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,74 @@
+datasource db {
+    provider = "postgres"
+    url      = env("DATABASE_URL")
+}
+
+generator photon {
+    provider = "photonjs"
+}
+
+model Guild {
+    id String @id
+
+    name String
+
+    user      User[]
+    commands  Command[]
+    reminders Reminder[]
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
+
+model Reminder {
+    id String @id
+
+    content String
+
+    user      User
+    guild     Guild
+    messageId String
+    channelId String
+
+    isDone   Boolean  @default(false)
+    remindAt DateTime
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
+
+model Channel {
+    id String @id
+
+    guild Guild
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
+
+model Command {
+    id String @id
+
+    trigger  String
+    response String
+
+    user  User
+    guild Guild
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
+
+model User {
+    id String @id
+
+    username String
+
+    guild    Guild
+    commands Command[]
+
+    timezone String?
+
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+}
```


